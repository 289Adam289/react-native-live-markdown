{"version":3,"names":["BrowserUtils","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","prevTextLength","findTextNodes","textNodes","node","nodeType","Node","TEXT_NODE","push","length","childNodes","childNode","setPrevText","target","_textNodes$map","text","map","nodeValue","join","split","setCursorPosition","start","end","_textNodes$map2","range","document","createRange","selectNodeContents","textCharacters","prevChar","nextChar","charCount","startNode","endNode","textNode","nextCharCount","undefined","setStart","isFirefox","setEnd","collapse","selection","window","getSelection","removeAllRanges","addRange","scrollCursorIntoView","moveCursorToEnd","getCurrentCursorPosition","rangeCount","getRangeAt","preSelectionRange","cloneRange","startContainer","startOffset","toString","removeSelection","selectionStart","value","caretRect","getClientRects","editableRect","getBoundingClientRect","paddingTop","parseFloat","getComputedStyle","borderTop","borderTopWidth","top","bottom","topToCaret","inputHeight","height","inputOffset","isChromium","scrollTo","scrollTop"],"sourceRoot":"../../../src","sources":["web/cursorUtils.ts"],"mappings":"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"}