{"version":3,"names":["BrowserUtils","_interopRequireWildcard","require","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","findTextNodes","textNodes","node","nodeType","Node","TEXT_NODE","push","length","childNodes","childNode","setCursorPosition","target","start","end","range","document","createRange","selectNodeContents","charCount","startNode","endNode","textNode","nextCharCount","setStart","setEnd","collapse","selection","window","getSelection","removeAllRanges","addRange","scrollCursorIntoView","moveCursorToEnd","getCurrentCursorPosition","rangeCount","getRangeAt","preSelectionRange","cloneRange","startContainer","startOffset","toString","removeSelection","selectionStart","value","isFirefox","caretRect","getClientRects","editableRect","getBoundingClientRect","paddingTop","parseFloat","getComputedStyle","borderTop","borderTopWidth","top","bottom","topToCaret","inputHeight","height","inputOffset","isChromium","scrollTo","scrollTop"],"sourceRoot":"../../../src","sources":["web/cursorUtils.ts"],"mappings":"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"}