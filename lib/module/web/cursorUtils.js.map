{"version":3,"names":["BrowserUtils","findTextNodes","textNodes","node","nodeType","Node","TEXT_NODE","push","i","length","childNodes","childNode","setCursorPosition","target","start","end","range","document","createRange","selectNodeContents","charCount","startNode","endNode","n","textNode","nextCharCount","setStart","setEnd","collapse","selection","window","getSelection","removeAllRanges","addRange","scrollCursorIntoView","moveCursorToEnd","getCurrentCursorPosition","rangeCount","getRangeAt","preSelectionRange","cloneRange","startContainer","startOffset","toString","removeSelection","selectionStart","value","isFirefox","caretRect","getClientRects","editableRect","getBoundingClientRect","paddingTop","parseFloat","getComputedStyle","borderTop","borderTopWidth","top","bottom","topToCaret","inputHeight","height","inputOffset","isChromium","scrollTo","scrollTop"],"sourceRoot":"../../../src","sources":["web/cursorUtils.ts"],"mappings":"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"}